(self.webpackChunkcanvas_blog=self.webpackChunkcanvas_blog||[]).push([[824,465],{465:(t,e,i)=>{"use strict";i.r(e),i.d(e,{EventEmitter:()=>n});var o=function(t,e){var i="function"==typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,s,n=i.call(t),r=[];try{for(;(void 0===e||e-- >0)&&!(o=n.next()).done;)r.push(o.value)}catch(t){s={error:t}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(s)throw s.error}}return r},s=function(t,e){for(var i=0,o=e.length,s=t.length;i<o;i++,s++)t[s]=e[i];return t},n=function(){function t(){this.events={}}return t.prototype.on=function(t,e){var i;this.events[t]=null!==(i=this.events[t])&&void 0!==i?i:[],this.events[t].push(e)},t.prototype.off=function(t){this.events[t]&&delete this.events[t]},t.prototype.once=function(t,e){var i=this;this.on(t,(function(){for(var o=[],s=0;s<arguments.length;s++)o[s]=arguments[s];e(o),i.off(t)}))},t.prototype.trigger=function(t){for(var e,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];null===(e=this.events[t])||void 0===e||e.forEach((function(t){t.apply(void 0,s([],o(i)))}))},t}()},824:(t,e,i)=>{"use strict";i.r(e),i.d(e,{init:()=>s});var o=new(i(465).EventEmitter);function s(){var t,e,i=document.querySelector("#welcome"),o=i.getContext("2d");function s(){var t=i.closest("section").clientWidth/i.width,e=window.innerHeight/i.height;i.style.transformOrigin="0 0",i.style.transform="scale("+t+","+e+")"}!function(){e=i.height=window.innerHeight;var o=i.closest("section");t=i.width=o.clientWidth}(),window.addEventListener("resize",s);var n=function(){function i(i){void 0===i&&(i="Welcome"),this.ball=[],this.stage=1,this.blink=null,this.animate=this.animate.bind(this),this.moveBall=this.moveBall.bind(this),this.moveBallTarget=this.moveBallTarget.bind(this),this.animateId=0,this.text=i,this.fl=200,this.vpX=t/2,this.vpY=e/2,this.angleY=Math.PI/180*1,this.sumAngleY=0}return i.prototype.init=function(){this.createBallAndSetTarget(),this.animate()},i.prototype.createBallAndSetTarget=function(){var i=this.fl,s=i/(i+50);o.font="bold 50px Arial",o.textAlign="center",o.textBaseline="middle",o.fillStyle="red",o.fillText(this.text,t/2,e/2);for(var n=o.getImageData(0,0,t,e),a=new Uint32Array(n.data.buffer),l=0;l<e;l+=2)for(var h=0;h<t;h+=2)if(a[l*t+h]){var p=new r((h-t/2)/s,(l-e/2)/s,50),c=new r((this.getRandom(20,t-20)-t/2)/s,(e-0-e/2)/s,50);c.target=p,this.ball.push(c)}o.clearRect(0,0,t,e)},i.prototype.getRandom=function(t,e){return t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t},i.prototype.drawBall=function(t){t.visible&&t.draw(o)},i.prototype.limit=function(t,e){var i=t>0?1:-1;return Math.max(Math.abs(t),e)*i},i.prototype.distance=function(t,e){return Math.sqrt(Math.pow(t.xpos-e.xpos,2)+Math.pow(t.ypos-e.ypos,2)+Math.pow(t.zpos-e.zpos,2))},i.prototype.moveX=function(t){if(t.arriveX)t.xpos=t.target.xpos;else{var e=(t.target.xpos-t.xpos)/1e4;t.vx+=e,t.xpos+=t.vx,this.lineDistance(t.xpos,t.target.xpos)<5&&(t.arriveX=!0)}},i.prototype.moveY=function(t){if(t.arriveY)t.ypos=t.target.ypos;else{var e=(t.target.ypos-t.ypos)/8e3;t.vy+=e,t.ypos+=t.vy,this.lineDistance(t.ypos,t.target.ypos)<5&&(t.arriveY=!0)}},i.prototype.moveZ=function(t){if(t.arriveZ)t.zpos=t.target.zpos;else{var e=(t.target.zpos-t.zpos)/1e4;t.vz+=e,t.zpos+=t.vz,this.lineDistance(t.zpos,t.target.zpos)<5&&(t.arriveZ=!0)}},i.prototype.moveBall=function(t,e){t.arrive?(t.xpos=t.target.xpos,t.ypos=t.target.ypos,t.zpos=t.target.zpos):(this.moveX(t),this.moveY(t),this.moveZ(t),this.distance(t,t.target)<10&&(t.arrive=!0));var i=this.fl/(this.fl+t.zpos);t.scaleX=t.scaleY=i,t.x=this.vpX+t.xpos*i,t.y=this.vpY+t.ypos*i,t.zpos<-this.fl?t.visible=!1:t.visible=!0},i.prototype.lineDistance=function(t,e){return Math.abs(t-e)},i.prototype.moveBallTarget=function(t,e){var i=t.target,o=this.angleY,s=i.xpos*Math.cos(o)-(i.zpos-50)*Math.sin(o),n=(i.zpos-50)*Math.cos(o)+i.xpos*Math.sin(o);i.xpos=s,i.zpos=n+50},i.prototype.sort=function(t,e){return e.zpos-t.zpos},i.prototype.lisenArrive=function(t,e){t.length},i.prototype.drawText=function(){o.font="bold 50px Arial",o.textAlign="center",o.textBaseline="middle",o.fillStyle="black",o.fillText(this.text,t/2,e/2)},i.prototype.go=function(i){var s=this;({1:function(){if(s.sumAngleY>360)return s.stage=2,void(s.blink=new a(s.text));s.ball.forEach(s.moveBallTarget),s.ball.forEach(s.moveBall),s.sumAngleY+=1,s.ball.sort(s.sort),o.clearRect(0,0,t,e),s.ball.forEach(s.drawBall)},2:function(){if(s.blink){if(s.blink.over)return s.blink=null,o.clearRect(0,0,t,e),s.drawText(),s.ball=[],void(s.stage=3);o.clearRect(0,0,t,e),s.ball.forEach(s.drawBall),s.blink.move(),s.blink.draw(o)}},3:function(){},4:function(){}})[i]()},i.prototype.animate=function(){this.animateId=window.requestAnimationFrame(this.animate),this.go(this.stage)},i.prototype.exit=function(){window.cancelAnimationFrame(this.animateId)},i}(),r=function(){function t(t,e,i){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),this.x=0,this.y=0,this.xpos=t,this.ypos=e,this.zpos=i,this.vz=0,this.vx=0,this.vy=0,this.radius=.5,this.rotation=0,this.mass=1,this.scaleX=1,this.scaleY=1,this.name="",this.color="black",this.lineWidth=1,this.visible=!0,this.target={xpos:0,ypos:0,zpos:0},this.arrive=!1,this.arriveX=!1,this.arriveY=!1,this.arriveZ=!1}return t.prototype.draw=function(t){t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.scale(this.scaleX,this.scaleY),t.lineWidth=this.lineWidth,t.fillStyle=this.color,t.strokeStyle=this.color,t.beginPath(),t.arc(0,0,this.radius,0,2*Math.PI,!1),t.closePath(),t.fill(),t.stroke(),t.restore()},t}(),a=function(){function i(i){this.x=t/2,this.y=e/2,this.width=20,this.height=500,this.vx=5,this.fillStyle="rgba(255,255,255,0.5)",this.textWidth=o.measureText(i).width,this.over=!1}return i.prototype.move=function(){this.x-t/2>=this.textWidth?this.over=!0:this.x+=this.vx},i.prototype.draw=function(t){t.save(),t.translate(this.x-this.textWidth/2,this.y-20),t.rotate(30*Math.PI/180),t.fillStyle=this.fillStyle,t.fillRect(-this.width/2,-this.height/2,this.width,this.height),t.restore()},i}(),l=new n;return l.init(),function(){null==l||l.exit(),l=null,window.removeEventListener("resize",s)}}o.on("aa",(function(t){})),o.trigger("aa",1),o.trigger("aa",2)}}]);