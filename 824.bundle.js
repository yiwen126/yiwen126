(self.webpackChunkcanvas_blog=self.webpackChunkcanvas_blog||[]).push([[824],{824:(t,i,e)=>{"use strict";function s(){var t,i,e=document.querySelector("#welcome"),s=e.getContext("2d");function o(){var t=e.closest("section").clientWidth/e.width,i=window.innerHeight/e.height;e.style.transformOrigin="0 0",e.style.transform="scale("+t+","+i+")"}!function(){i=e.height=window.innerHeight;var s=e.closest("section");t=e.width=s.clientWidth}(),window.addEventListener("resize",o);var a=function(){function e(e){void 0===e&&(e="Welcome"),this.ball=[],this.stage=1,this.blink=null,this.animate=this.animate.bind(this),this.moveBall=this.moveBall.bind(this),this.moveBallTarget=this.moveBallTarget.bind(this),this.animateId=0,this.text=e,this.fl=200,this.vpX=t/2,this.vpY=i/2,this.angleY=Math.PI/180*1,this.sumAngleY=0}return e.prototype.init=function(){this.createBallAndSetTarget(),this.animate()},e.prototype.createBallAndSetTarget=function(){var e=this.fl,o=e/(e+50);s.font="bold 50px Arial",s.textAlign="center",s.textBaseline="middle",s.fillStyle="red",s.fillText(this.text,t/2,i/2);for(var a=s.getImageData(0,0,t,i),r=new Uint32Array(a.data.buffer),l=0;l<i;l+=2)for(var h=0;h<t;h+=2)if(r[l*t+h]){var p=new n((h-t/2)/o,(l-i/2)/o,50),c=new n((this.getRandom(20,t-20)-t/2)/o,(i-0-i/2)/o,50);c.target=p,this.ball.push(c)}s.clearRect(0,0,t,i)},e.prototype.getRandom=function(t,i){return t=Math.ceil(t),i=Math.floor(i),Math.floor(Math.random()*(i-t+1))+t},e.prototype.drawBall=function(t){t.visible&&t.draw(s)},e.prototype.limit=function(t,i){var e=t>0?1:-1;return Math.max(Math.abs(t),i)*e},e.prototype.distance=function(t,i){return Math.sqrt(Math.pow(t.xpos-i.xpos,2)+Math.pow(t.ypos-i.ypos,2)+Math.pow(t.zpos-i.zpos,2))},e.prototype.moveX=function(t){if(t.arriveX)t.xpos=t.target.xpos;else{var i=(t.target.xpos-t.xpos)/1e4;t.vx+=i,t.xpos+=t.vx,this.lineDistance(t.xpos,t.target.xpos)<5&&(t.arriveX=!0)}},e.prototype.moveY=function(t){if(t.arriveY)t.ypos=t.target.ypos;else{var i=(t.target.ypos-t.ypos)/8e3;t.vy+=i,t.ypos+=t.vy,this.lineDistance(t.ypos,t.target.ypos)<5&&(t.arriveY=!0)}},e.prototype.moveZ=function(t){if(t.arriveZ)t.zpos=t.target.zpos;else{var i=(t.target.zpos-t.zpos)/1e4;t.vz+=i,t.zpos+=t.vz,this.lineDistance(t.zpos,t.target.zpos)<5&&(t.arriveZ=!0)}},e.prototype.moveBall=function(t,i){t.arrive?(t.xpos=t.target.xpos,t.ypos=t.target.ypos,t.zpos=t.target.zpos):(this.moveX(t),this.moveY(t),this.moveZ(t),this.distance(t,t.target)<10&&(t.arrive=!0));var e=this.fl/(this.fl+t.zpos);t.scaleX=t.scaleY=e,t.x=this.vpX+t.xpos*e,t.y=this.vpY+t.ypos*e,t.zpos<-this.fl?t.visible=!1:t.visible=!0},e.prototype.lineDistance=function(t,i){return Math.abs(t-i)},e.prototype.moveBallTarget=function(t,i){var e=t.target,s=this.angleY,o=e.xpos*Math.cos(s)-(e.zpos-50)*Math.sin(s),a=(e.zpos-50)*Math.cos(s)+e.xpos*Math.sin(s);e.xpos=o,e.zpos=a+50},e.prototype.sort=function(t,i){return i.zpos-t.zpos},e.prototype.lisenArrive=function(t,i){t.length},e.prototype.drawText=function(){s.font="bold 50px Arial",s.textAlign="center",s.textBaseline="middle",s.fillStyle="black",s.fillText(this.text,t/2,i/2)},e.prototype.go=function(e){var o=this;({1:function(){if(o.sumAngleY>360)return o.stage=2,void(o.blink=new r(o.text));o.ball.forEach(o.moveBallTarget),o.ball.forEach(o.moveBall),o.sumAngleY+=1,o.ball.sort(o.sort),s.clearRect(0,0,t,i),o.ball.forEach(o.drawBall)},2:function(){if(o.blink){if(o.blink.over)return o.blink=null,s.clearRect(0,0,t,i),o.drawText(),o.ball=[],void(o.stage=3);s.clearRect(0,0,t,i),o.ball.forEach(o.drawBall),o.blink.move(),o.blink.draw(s)}},3:function(){},4:function(){}})[e]()},e.prototype.animate=function(){this.animateId=window.requestAnimationFrame(this.animate),this.go(this.stage)},e.prototype.exit=function(){window.cancelAnimationFrame(this.animateId)},e}(),n=function(){function t(t,i,e){void 0===t&&(t=0),void 0===i&&(i=0),void 0===e&&(e=0),this.x=0,this.y=0,this.xpos=t,this.ypos=i,this.zpos=e,this.vz=0,this.vx=0,this.vy=0,this.radius=.5,this.rotation=0,this.mass=1,this.scaleX=1,this.scaleY=1,this.name="",this.color="black",this.lineWidth=1,this.visible=!0,this.target={xpos:0,ypos:0,zpos:0},this.arrive=!1,this.arriveX=!1,this.arriveY=!1,this.arriveZ=!1}return t.prototype.draw=function(t){t.save(),t.translate(this.x,this.y),t.rotate(this.rotation),t.scale(this.scaleX,this.scaleY),t.lineWidth=this.lineWidth,t.fillStyle=this.color,t.strokeStyle=this.color,t.beginPath(),t.arc(0,0,this.radius,0,2*Math.PI,!1),t.closePath(),t.fill(),t.stroke(),t.restore()},t}(),r=function(){function e(e){this.x=t/2,this.y=i/2,this.width=20,this.height=500,this.vx=5,this.fillStyle="rgba(255,255,255,0.5)",this.textWidth=s.measureText(e).width,this.over=!1}return e.prototype.move=function(){this.x-t/2>=this.textWidth?this.over=!0:this.x+=this.vx},e.prototype.draw=function(t){t.save(),t.translate(this.x-this.textWidth/2,this.y-20),t.rotate(30*Math.PI/180),t.fillStyle=this.fillStyle,t.fillRect(-this.width/2,-this.height/2,this.width,this.height),t.restore()},e}(),l=new a;return l.init(),function(){null==l||l.exit(),l=null,window.removeEventListener("resize",o)}}e.r(i),e.d(i,{init:()=>s})}}]);